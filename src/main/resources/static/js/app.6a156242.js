(function(t){function e(e){for(var n,a,o=e[0],r=e[1],c=e[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);D&&D(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),u()}function u(){for(var t,e=0;e<s.length;e++){for(var u=s[e],n=!0,o=1;o<u.length;o++){var r=u[o];0!==i[r]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=u[0]))}return t}var n={},i={app:0},s=[];function a(e){if(n[e])return n[e].exports;var u=n[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,a),u.l=!0,u.exports}a.m=t,a.c=n,a.d=function(t,e,u){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:u})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(u,n,function(e){return t[e]}.bind(null,n));return u},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var D=r;s.push([0,"chunk-vendors"]),u()})({0:function(t,e,u){t.exports=u("56d7")},"24ba":function(t,e,u){},"4a9a":function(t,e,u){"use strict";u("dea9")},"4e6c":function(t,e,u){},"56d7":function(t,e,u){"use strict";u.r(e);u("e260"),u("e6cf"),u("cca6"),u("a79d");var n=u("2b0e"),i=u("2b27"),s=u.n(i),a=u("5f5b"),o=u("cca8"),r=u("f357"),c=u("b1e0"),D=u("e68d"),l=u("dbbe"),d=u("f9bc"),m=u("f7ca"),h=u("c986"),v=u.n(h),f=u("27d6"),C=u.n(f),A=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("div",{staticClass:"no-user-select article-6",attrs:{id:"app"}},[u("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"light",sticky:"true"}},[u("b-navbar-brand",{staticClass:"title-4"},[t._v("Booking")]),u("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),u("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[u("b-navbar-nav",{staticClass:"title-5"},[u("b-nav-item-dropdown",{scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v("Admin")]},proxy:!0}])},[u("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.redirect("/admin")}}},[t._v("Profile")]),u("b-dropdown-item",{attrs:{href:"#",disabled:!this.$store.getters.isAuthenticated},on:{click:function(e){return t.logout()}}},[t._v(" Sign Out ")])],1),u("b-nav-item",{attrs:{href:"#"},on:{click:function(e){return t.redirect("/times")}}},[t._v("Time Slots")])],1),u("b-navbar-nav",{staticClass:"title-5 ml-auto"},[u("b-nav-item",{attrs:{right:""}},[u("Info",{attrs:{id:"labInstructions",placement:"bottomleft",title:"Lab Instructions"}},[u("p",[u("b",[t._v("Your task")]),t._v(" in this lab assignment is to build "),u("b",[t._v("a simple lab booking system")]),t._v(". "),u("br"),u("br"),t._v(" The system should consist of (at least) "),u("b",[t._v("three pages")]),t._v(": "),u("br"),u("br"),u("ul",[u("li",[t._v("A booking page including all information about the time slots and their current state.")]),u("li",[t._v("A confirmation page including a countdown timer where the students may complete their booking.")]),u("li",[t._v("An admin page for the assistants only where they can edit (add/remove) their own times. ")])]),u("br"),u("br"),t._v(" ... "),u("br"),u("br"),t._v(" For more detailed lab instructions, please visit the "),u("i",[u("a",{attrs:{href:"https://kth.instructure.com/courses/21342/assignments/137566"}},[t._v("Canvas site")])]),t._v("! ")])])],1),u("b-nav-item",{attrs:{right:""}},[u("b-avatar",{attrs:{button:"",variant:"primary",text:this.$store.getters.signedInAvatar},on:{click:function(e){return t.redirect("/admin")}}})],1)],1)],1)],1),u("transition",{attrs:{name:"fade",mode:"out-in"}},[u("router-view")],1)],1)},F=[],p=(u("d3b7"),function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("b-link",{attrs:{disabled:""}},[u("b-icon-question-circle",{staticClass:"h5",attrs:{id:t.infoId,animation:"cylon-vertical",variant:"warning"}}),u("b-popover",{attrs:{target:t.infoId,triggers:"click blur",placement:t.infoPlacement,variant:"warning","custom-class":"no-user-select article-7 text-justify"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.infoTitle))]},proxy:!0}])},[t._t("default")],2)],1)}),b=[],E={name:"Info",props:["id","placement","title"],data:function(){return{infoId:this.id,infoPlacement:this.placement,infoTitle:this.title}}},g=E,B=u("2877"),_=Object(B["a"])(g,p,b,!1,null,null,null),y=_.exports,w={name:"App",components:{Info:y},created:function(){performance.navigation.type===performance.navigation.TYPE_RELOAD?(console.info("This page is reloaded"),this.redirect("/times")):console.info("This page is not reloaded");var t=this.$store,e=t.commit,u=t.dispatch;e("resetAuthMessage"),u("isAuthenticated")},computed:{authenticated:function(){return this.$store.getters.isAuthenticated}},watch:{authenticated:function(t){t?this.redirect("/admin"):this.redirect("/login")}},methods:{redirect:function(t){this.$router.push(t).catch((function(t){return console.log(t.message)}))},logout:function(){var t=this.$store,e=t.commit,u=t.dispatch;return fetch("/api/secured/v1/logout",{method:"POST",headers:{"X-XSRF-TOKEN":"".concat(this.$cookies.get("XSRF-TOKEN"))}}).then((function(t){return t.json()})).then((function(t){var n=t.assistant,i=void 0===n?null:n,s=t.authenticated,a=void 0!==s&&s;e("authenticate",{assistant:i,authenticated:a}),a||e("setAuthMessage",{message:"Signed out successfully",variant:"success"}),u("reconnect")})).catch(console.error)}}},T=w,k=(u("5c0b"),Object(B["a"])(T,A,F,!1,null,null,null)),x=k.exports,S=u("8c4f"),O=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("div",{staticClass:"container"},[u("section",{staticClass:"col-md-12"},[u("b-card",{staticClass:"my-2",attrs:{"bg-variant":"light"},scopedSlots:t._u([{key:"header",fn:function(){return[u("h4",{staticClass:"title-1 text-center font-italic"},[t._v(" Signed in "),u("em",[t._v("as")]),t._v(" "+t._s(t.$store.getters.signedIn)+" "),u("Info",{attrs:{id:"adminInstructions",placement:"right",title:"Other Instructions"}},[u("p",[t._v(" Two aspects are important here, "),u("i",[t._v("communication")]),t._v(" and "),u("i",[t._v("security")]),t._v(". "),u("br"),u("br"),u("i",[t._v("Communication")]),t._v(" works well if the time/times that has/have been added/removed immediately appears/disappear in/from all other connected clients. Feel free to use "),u("i",[u("a",{attrs:{href:"https://socket.io/"}},[t._v("socket.io library")])]),t._v(" based on WebSocket or any other technique/protocol of Your choice. "),u("br"),u("br"),t._v(" Open at least two different clients (web browsers with 1+ tabs each) or just one single client in two different modes, ordinary and incognito. Then add/remove some times, open/close some clients/tabs and make sure that everything works properly. "),u("br"),u("br"),u("i",[t._v("Security")]),t._v(" is a bit more complicated topic. "),u("br"),u("br"),t._v(" Both forms validate the input data. The first one makes it impossible to send some non-valid, "),u("i",[t._v("suspicious")]),t._v(" data by using the web interface. The second one makes it "),u("b",[t._v("not")]),t._v(". For example, it's allowed for the "),u("i",[t._v("Lorem")]),t._v(" user to try to remove those times that belong to "),u("i",[t._v("Ipsum")]),t._v(" and vice versa. Such an attempt from the very beginning is doomed to fail due to the server side checks. However, the client gives such an opportunity. "),u("br"),u("br"),t._v(" Is it enough to state without further consideration that the application is secured properly? The first form, the second one, both, any? The answer is "),u("b",[t._v("NO")]),t._v(". ")])])],1)]},proxy:!0}])},[u("div",{staticClass:"row"},[u("div",{staticClass:"col-xs-2 col-sm-3 col-md-4"}),u("div",{staticClass:"col-xs-8 col-sm-6 col-md-4"},[u("b-form",{on:{submit:function(e){e.preventDefault(),t.validateAddition()&&t.addTime()}}},[u("b-form-timepicker",{staticClass:"my-2",attrs:{state:t.validateAddition(),locale:"sv","menu-class":"article-6","now-button":"","reset-button":"","no-close-button":""},model:{value:t.timeToAdd,callback:function(e){t.timeToAdd=e},expression:"timeToAdd"}}),u("b-form-invalid-feedback",{attrs:{state:!t.validateAddition()}},[t.validateTimeFormat()?t._e():u("span",[t._v("No time selected")]),t.validateTimeAvailability()?t._e():u("span",[t._v("Time already exists")])]),t.additionError?u("b-alert",{staticClass:"my-2 text-center",attrs:{variant:"danger",fade:"",show:""}},[t._v(" "+t._s(t.additionError)+" ")]):t._e(),u("b-button",{staticClass:"my-2 font-bold",attrs:{type:"submit",disabled:!t.validateAddition(),block:"",variant:"success"}},[t._v(" ADD ")])],1),u("Info",{attrs:{id:"additionInstructions",placement:"left",title:"Other Instructions"}},[u("p",[t._v(" This part of the client is secured, i.e. it's impossible to send non-valid data by using "),u("i",[t._v("only")]),t._v(" the web interface. "),u("br"),u("br"),t._v(" Open "),u("i",[t._v("Network")]),t._v(" tab among "),u("i",[t._v("Web Developer")]),t._v(" options and add some time. Then, right-click on the HTTP AJAX request being sent and copy it as fetch. Switch tab to "),u("i",[t._v("Web Console")]),t._v(" and paste it. Try to change the payload to some non-valid, "),u("i",[t._v("suspicious")]),t._v(" data before pressing the "),u("i",[t._v("Enter")]),t._v(' key. How has the server responded? Has the server crashed? Has "the time" been added? '),u("br"),u("br"),u("b",[t._v("Securing client is "),u("i",[t._v("recommended")]),t._v(", but still "),u("i",[t._v("optional")]),t._v(". Securing server is absolutely "),u("i",[t._v("mandatory")]),t._v(".")])])])],1),u("div",{staticClass:"col-xs-2 col-sm-3 col-md-4"})]),u("div",{staticClass:"row"},[u("div",{staticClass:"col-xs-2 col-sm-3 col-md-4"}),u("div",{staticClass:"col-xs-8 col-sm-6 col-md-4"},[u("b-form",{on:{submit:function(e){e.preventDefault(),t.validateRemoval()&&t.removeTimes()}}},[u("b-form-checkbox-group",{staticClass:"my-2",attrs:{state:t.validateRemoval()}},[t._l(t.times,(function(e){return u("b-form-checkbox",{key:e.id,staticClass:"mt-2",attrs:{value:e.id},model:{value:t.timesToRemove,callback:function(e){t.timesToRemove=e},expression:"timesToRemove"}},[u("b-card",{attrs:{"title-tag":"h5",title:"Time: "+e.time,"sub-title-tag":"h6","sub-title":"@"+e.assistant.username,"body-class":"pt-2 pb-1","footer-class":"py-1","footer-border-variant":"danger"},scopedSlots:t._u([null!==e.confirmedBy?{key:"footer",fn:function(){return[u("div",{staticClass:"text-right"},[u("span",{staticClass:"mx-2 font-weight-light font-italic"},[t._v("booked by")]),u("span",{staticClass:"font-weight-bolder"},[t._v(t._s(e.confirmedBy))])])]},proxy:!0}:null],null,!0)})],1)})),u("b-form-invalid-feedback",{attrs:{state:t.validateRemoval()}},[t._v(" Please select at least one time ")])],2),t.removalError?u("b-alert",{staticClass:"my-2 text-center",attrs:{variant:"danger",fade:"",show:""}},[t._v(" "+t._s(t.removalError)+" ")]):t._e(),u("b-button",{staticClass:"my-2 font-bold",attrs:{type:"submit",disabled:!t.validateRemoval(),block:"",variant:"danger"}},[t._v(" REMOVE ")])],1),u("Info",{attrs:{id:"removalInstructions",placement:"left",title:"Other Instructions"}},[u("p",[t._v(" This part of the client is "),u("i",[t._v("mostly")]),t._v(" secured, i.e. it's possible to send some non-valid (in that particular case, "),u("i",[t._v("unauthorized")]),t._v(") data by using "),u("i",[t._v("only")]),t._v(" the web interface as discussed above. "),u("br"),u("br"),t._v(" Once again... Open "),u("i",[t._v("Web Console")]),t._v(", copy the respective HTTP AJAX request as fetch and play with it before sending. Feel free to change not only the payload, but also the headers and check how the server will respond. "),u("br"),u("br"),u("b",[t._v("Securing client is "),u("i",[t._v("recommended")]),t._v(", but still "),u("i",[t._v("optional")]),t._v(". Securing server is absolutely "),u("i",[t._v("mandatory")]),t._v(".")])])])],1),u("div",{staticClass:"col-xs-2 col-sm-3 col-md-4"})])])],1)])},$=[],I=(u("4de4"),u("4160"),u("caad"),u("d81d"),u("ac1f"),u("2532"),u("3ca3"),u("466d"),u("159b"),u("ddb0"),u("96cf"),u("1da1")),R={name:"Admin",components:{Info:y},data:function(){return{indeterminateRemoveForm:!0,timeToAdd:null,timesToRemove:[],additionError:null,removalError:null}},computed:{times:{get:function(){return this.$store.getters.times},set:function(t){this.$store.commit("setTimes",t)}}},watch:{timesToRemove:function(t,e){null===t?(this.indeterminateRemoveForm=!0,this.timesToRemove=[]):null!==e&&(this.indeterminateRemoveForm=!1)}},methods:{validateTimeFormat:function(){return null===this.timeToAdd?this.timeToAdd:null!==this.timeToAdd.match(/^([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/)},validateTimeAvailability:function(){var t=this.$store.getters,e=t.times,u=t.signedIn;return null===this.timeToAdd?this.timeToAdd:!e.filter((function(t){return t.assistant.username===u})).map((function(t){return t.time})).includes(this.timeToAdd.substring(0,5))},validateAddition:function(){return null===this.timeToAdd?this.timeToAdd:this.validateTimeFormat()&&this.validateTimeAvailability()},validateRemoval:function(){return this.indeterminateRemoveForm?null:0!==this.timesToRemove.length},addTime:function(){var t=this,e=this.$store,u=e.commit,n=e.dispatch,i=fetch("/api/secured/v1/times",{method:"POST",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":"".concat(this.$cookies.get("XSRF-TOKEN"))},body:JSON.stringify({time:this.timeToAdd.substring(0,5)})});return this.timeToAdd=null,Promise.resolve(i).then(function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(i){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.additionError=null,e.next=4,i.json();case 4:s=e.sent,a=s.message,a&&(t.additionError=a),401!==i.status&&403!==i.status||(u("setAuthMessage",{message:a,variant:"danger"}),n("isAuthenticated")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()).catch(console.error)},removeTimes:function(){var t=this,e=this.$store,u=e.commit,n=e.dispatch,i=this.timesToRemove.map((function(e){return fetch("/api/secured/v1/times/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":"".concat(t.$cookies.get("XSRF-TOKEN"))}})}));return this.timesToRemove=null,Promise.all(i).then((function(e){t.removalError=null,e.forEach(function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(i){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.json();case 3:s=e.sent,a=s.message,a&&(t.removalError=a),401!==i.status&&403!==i.status||(u("setAuthMessage",{message:a,variant:"danger"}),n("isAuthenticated")),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())})).catch(console.error)}}},M=R,P=(u("4a9a"),Object(B["a"])(M,O,$,!1,null,null,null)),j=P.exports,N=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("div",{staticClass:"container"},[u("section",{staticClass:"col-md-12"},[u("b-card",{staticClass:"my-2",attrs:{"bg-variant":"light"},scopedSlots:t._u([{key:"header",fn:function(){return[u("h4",{staticClass:"title-1 text-center font-italic"},[t._v(" All time slots "),u("Info",{attrs:{id:"reservationInstructions",placement:"bottomleft",title:"Other Instructions"}},[u("p",[t._v(" Fetch all the times, e.g. by sending an ordinary HTTP AJAX request, and then keep updating their state in real-time. This can be achieved through any of several techniques, e.g. "),u("i",[u("a",{attrs:{href:"https://socket.io/"}},[t._v("socket.io library")])]),t._v(" based on WebSocket protocol. "),u("br"),u("br"),t._v(" Make sure that the user won't be allowed to reserve some already reserved time - try it and check the web console output afterwards, complete a time booking without reserving the time first, book a time that has already been booked by someone else, etc. Remember that all checks need to be done, as always, regardless of the protocol being used, on the server side. Do "),u("b",[t._v("not")]),t._v(" trust the client, check it! ")])])],1)]},proxy:!0}])},[u("b-list-group",{staticClass:"row"},[u("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:!t.$store.getters.isConnected,expression:"!$store.getters.isConnected"}],class:["my-2",{connecting:!t.$store.getters.isConnected}],attrs:{variant:"warning"}},[u("h5",{staticClass:"my-2 article-6 text-center"},[t._v("Please wait while connecting...")])]),u("transition-group",{attrs:{name:"fade",mode:"out-in"}},t._l(t.times,(function(e){return u("Time",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.isConnected,expression:"$store.getters.isConnected"}],key:e.id,attrs:{id:e.id},on:{reserve:function(u){return t.reserve(e)}}})})),1)],1),u("Modal",{attrs:{id:"alert"},on:{dismiss:function(e){return t.$bvModal.hide("alert")}}},[u("Info",{staticClass:"mt-3 mx-3 float-md-right",attrs:{id:"alertInstructions",placement:"left",title:"Other Instructions"}},[u("p",[t._v(" Check the web console output now! "),u("br"),u("br"),t._v(" Do not hesitate while developing this application to send some arbitrary data over WebSocket by accesssing the corresponding function in the appropriate Vue component, i.e. "),u("i",[t._v("view-model")]),t._v(", instance and check how the server responds. Remember to compile the Vue components in the "),u("i",[t._v("development")]),t._v(", and not "),u("i",[t._v("production")]),t._v(" mode in order to be able to do that - "),u("i",[t._v("npm run build-dev")]),t._v(". ")])])],1),u("Modal",{attrs:{id:"confirm"},on:{confirm:function(e){return t.confirm()},cancel:function(e){return t.cancel()}}},[u("Info",{staticClass:"mt-3 mx-3 float-md-right",attrs:{id:"confirmationInstructions",placement:"left",title:"Other Instructions"}},[u("p",[t._v(" Countdown should be implemented both on the client and the server side. "),u("br"),u("br"),t._v(" The client should control if the application needs to be redirected to the main page, i.e. the page showing all the time slots. "),u("br"),u("br"),t._v(" The server, on the other hand, should decide whether the time slot is allowed to be reserved or not. ")])])],1)],1)],1)])},L=[],X=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("b-modal",{attrs:{id:t.modalId,title:t.$store.getters.modalTitle,"title-class":"no-user-select title-5","hide-footer":""}},[u("div",{staticClass:"d-block no-user-select title-4 text-center"},[void 0!==t.chosenTime.assistant?u("h4",[u("strong",[t._v(t._s(t.chosenTime.time))]),t._v(" @"+t._s(t.chosenTime.assistant.username)+" ")]):t._e(),"confirm"===t.modalId?u("vac",{attrs:{speed:"10","end-time":(new Date).getTime()+1e4},scopedSlots:t._u([{key:"process",fn:function(e){var n=e.timeObj;return[u("h1",{staticClass:"my-4 countdown font-weight-bolder"},[t._v(t._s(("0"+n.ceil.s).substr(-2)))])]}}],null,!1,3013946567)}):t._e()],1),"alert"===t.modalId?u("b-form",{staticClass:"article-6",on:{submit:function(e){return e.preventDefault(),t.$emit("dismiss")}}},[u("b-button",{staticClass:"mt-3 float-md-right",attrs:{type:"submit",variant:"danger"}},[t._v(" Dismiss ")]),t._t("default")],2):t._e(),"confirm"===t.modalId?u("b-form",{staticClass:"article-6",on:{submit:function(e){e.preventDefault(),t.validated()&&t.$emit("confirm")},reset:function(e){return e.preventDefault(),t.$emit("cancel")}}},[u("b-form-input",{staticClass:"form-control",attrs:{state:t.validated(),type:"text",placeholder:"Your name..."},model:{value:t.chosenTime.confirmedBy,callback:function(e){t.$set(t.chosenTime,"confirmedBy",e)},expression:"chosenTime.confirmedBy"}}),u("b-form-invalid-feedback",[t._v(" Enter at least 3 letters, but not more than 24 ")]),u("b-button",{staticClass:"mt-3 float-md-right",attrs:{type:"submit",variant:"danger",disabled:!t.validated()}},[t._v(" Confirm ")]),u("b-button",{staticClass:"mt-3 mx-3 float-md-right",attrs:{type:"reset",variant:"secondary"}},[t._v(" Cancel ")]),t._t("default")],2):t._e()],1)},q=[],J=(u("c975"),{name:"Modal",props:{id:String},data:function(){return{modalId:this.id}},computed:{chosenTime:{get:function(){return this.$store.getters.chosenTime}}},mounted:function(){var t=this;t.$root.$on("bv::modal::hide",(function(e){["esc","backdrop","headerclose"].indexOf(e.trigger)>-1&&t.$emit("cancel")}))},methods:{validated:function(){return null!==(this.chosenTime.confirmedBy||"").match(/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]){3,24}$/)}}}),V=J,H=Object(B["a"])(V,X,q,!1,null,null,null),K=H.exports,W=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("b-list-group-item",{class:["my-2",{loading:t.$store.getters.isLoading(t.time),reserved:t.time.reserved&&!t.time.confirmedBy,confirmed:t.time.confirmedBy}],attrs:{variant:t.highlight(t.time),href:"#"},on:{click:function(e){!t.$store.getters.isLoadingAnyTime&&t.$emit("reserve")}}},[u("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.time.assistant,expression:"time.assistant !== undefined"}],staticClass:"title-5 text-center"},[u("span",{staticClass:"mx-2 font-weight-bolder"},[t._v(t._s(t.time.time))]),u("span",[t._v("@"+t._s(t.time.assistant.username))])]),u("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.time.confirmedBy,expression:"time.confirmedBy !== null"}],staticClass:"article-7 text-right"},[u("span",{staticClass:"mx-2 font-weight-light font-italic"},[t._v("booked by")]),u("span",{staticClass:"font-weight-bolder"},[t._v(t._s(t.time.confirmedBy))])])])},Y=[],z=(u("a9e3"),{name:"Time",props:{id:Number},data:function(){return{itemId:this.id}},computed:{time:{get:function(){return this.$store.getters.time(this.itemId)}}},methods:{highlight:function(t){return null!==t.confirmedBy?"danger":!0===t.reserved?"warning":"success"}}}),U=z,Q=(u("a71a"),Object(B["a"])(U,W,Y,!1,null,null,null)),Z=Q.exports,G={name:"Times",components:{Info:y,Modal:K,Time:Z},computed:{socket:{get:function(){return this.$store.getters.socket}},times:{get:function(){return this.$store.getters.times},set:function(t){this.$store.commit("setTimes",t)}},chosenTime:{get:function(){return this.$store.getters.chosenTime},set:function(t){this.$store.commit("setChosenTime",t)}}},mounted:function(){this.$store.commit("setModal",this.$bvModal)},methods:{reserve:function(t){this.chosenTime=t,this.$store.commit("setLoading",!0),this.socket.send("/app/ws-api/v1/make-reservation",{},JSON.stringify(t))},cancel:function(){this.socket.send("/app/ws-api/v1/cancel-reservation",{},JSON.stringify(this.chosenTime))},confirm:function(){this.socket.send("/app/ws-api/v1/confirm-reservation",{},JSON.stringify(this.chosenTime))}}},tt=G,et=(u("a1f2"),Object(B["a"])(tt,N,L,!1,null,null,null)),ut=et.exports,nt=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("div",{staticClass:"container"},[u("section",{staticClass:"col-md-12"},[u("b-card",{staticClass:"my-2",attrs:{"bg-variant":"light"},scopedSlots:t._u([{key:"header",fn:function(){return[u("h4",{staticClass:"title-1 text-center font-italic"},[t._v(" Please sign in "),u("Info",{attrs:{id:"loginInstructions",placement:"bottomleft",title:"Login Instructions"}},[u("p",[t._v(" In total, there are "),u("b",[t._v("two accounts")]),t._v(", one for each assistant, with the following credentials: "),u("br"),u("br"),u("ul",[u("li",[u("b",[t._v("Username: ")]),u("em",[t._v("Lorem")]),u("br"),u("b",[t._v("Password: ")]),u("em",[t._v("Lorem")])]),u("li",[u("b",[t._v("Username: ")]),u("em",[t._v("Ipsum")]),u("br"),u("b",[t._v("Password: ")]),u("em",[t._v("Ipsum")])])]),u("br"),t._v(" The login is successfull only if there exists a registered user with given credentials on the server side. The password is allowed to be sent in cleartext over an unencrypted channel (HTTPS is not required), but should be hashed (use BCrypt) and then stored in a database, e.g. SQLite. Only protection against SQL-injections is required. You do "),u("b",[t._v("not")]),t._v(" have to implement any protection against XSS- or CSRF-attacks. ")])])],1)]},proxy:!0}])},[u("div",{staticClass:"row"},[u("div",{staticClass:"col-xs-2 col-sm-3 col-md-4"}),u("div",{staticClass:"col-xs-8 col-sm-6 col-md-4"},[u("b-form",{on:{submit:function(e){return e.preventDefault(),t.login()}}},[this.$store.getters.authMessage?u("b-alert",{staticClass:"text-center",attrs:{variant:this.$store.getters.authMessageVariant,fade:"",show:""}},[t._v(" "+t._s(this.$store.getters.authMessage)+" ")]):t._e(),u("p",[u("b-form-input",{attrs:{id:"username",type:"text",placeholder:"Username",autofocus:"",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),u("p",[u("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),u("b-button",{staticClass:"font-bold",attrs:{size:"lg",type:"submit",block:"",variant:"primary"}},[t._v(" Sign in ")])],1)],1),u("div",{staticClass:"col-xs-2 col-sm-3 col-md-4"})])])],1)])},it=[],st=(u("99af"),{name:"Login",components:{Info:y},data:function(){return{username:"",password:""}},methods:{login:function(){var t=this.$store.commit;return fetch("/api/v1/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-XSRF-TOKEN":"".concat(this.$cookies.get("XSRF-TOKEN"))},body:"username=".concat(this.username,"&password=").concat(this.password)}).then((function(t){return t.json()})).then((function(e){var u=e.assistant,n=void 0===u?null:u,i=e.authenticated,s=void 0!==i&&i;t("authenticate",{assistant:n,authenticated:s}),s||t("setAuthMessage",{message:"Bad credentials",variant:"danger"})})).catch(console.error)}}}),at=st,ot=Object(B["a"])(at,nt,it,!1,null,null,null),rt=ot.exports,ct=u("2f62"),Dt=u("52f5"),lt=u.n(Dt),dt=(u("7db0"),u("c740"),u("a434"),{state:{loading:!1,times:[],chosenTime:{loading:!1},modal:void 0,modalTitle:void 0},getters:{isLoadingAnyTime:function(t){return!0===t.loading},isLoading:function(t){return function(e){return t.chosenTime.id===e.id&&!0===t.chosenTime.loading}},times:function(t){return t.times},time:function(t){return function(e){return t.times.find((function(t){return t.id===e}))||{}}},chosenTime:function(t){return t.chosenTime},modal:function(t){return t.modal},modalTitle:function(t){return t.modalTitle}},mutations:{setLoading:function(t,e){t.chosenTime.loading=e,t.loading=e},setTimes:function(t,e){t.times=e.sort((function(t,e){return t.time>e.time?1:t.time<e.time?-1:0}))},updateTime:function(t,e){var u=t.times.findIndex((function(t){var u=t.id;return u===e.id}));t.times.splice(u,1,e)},addTime:function(t,e){t.times.push(e),t.times.sort((function(t,e){return t.time>e.time?1:t.time<e.time?-1:0}))},removeTime:function(t,e){var u=t.times.findIndex((function(t){var u=t.id;return u===e.id}));t.times.splice(u,1)},setChosenTime:function(t,e){t.chosenTime=e},setModal:function(t,e){t.modal=e},setModalTitle:function(t,e){t.modalTitle=e}},actions:{},modules:{},plugins:[]}),mt={state:{message:null,messageVariant:"danger",authenticated:!1,assistant:null},getters:{authMessage:function(t){return t.message},authMessageVariant:function(t){return t.messageVariant},isAuthenticated:function(t){return t.authenticated},signedIn:function(t){return t.assistant},signedInAvatar:function(t){return t.assistant?t.assistant.charAt(0):t.assistant}},mutations:{resetAuthMessage:function(t){t.message=null,t.messageVariant="danger"},setAuthMessage:function(t,e){var u=e.message,n=e.variant;t.message=u,t.messageVariant=n},authenticate:function(t,e){var u=e.assistant,n=e.authenticated;t.assistant=u,t.authenticated=n}},actions:{isAuthenticated:function(t){var e=t.commit;return fetch("/api/v1/authentication").then((function(t){return t.json()})).then((function(t){var u=t.assistant,n=void 0===u?null:u,i=t.authenticated,s=void 0!==i&&i;e("authenticate",{assistant:n,authenticated:s})})).catch(console.error)}},modules:{},plugins:[]},ht=u("cc7d"),vt=u.n(ht),ft=u("a187"),Ct=u.n(ft),At=function(t,e){return function(){t("setAuthMessage",{message:"Session expired",variant:"danger"}),e("isAuthenticated").then((function(){return e("reconnect")}))}},Ft=function(t){return function(e){var u=e.headers.origin,n=e.body,i=JSON.parse(n);t("POST"===u?"addTime":"DELETE"===u?"removeTime":"updateTime",i)}},pt=function(t,e){return function(u){var n=u.body;t("setChosenTime",JSON.parse(n)),t("setLoading",!1),t("setModalTitle","Confirm the reservation"),e.modal.show("confirm")}},bt=function(t,e){return function(u){var n=u.body;t("setLoading",!1),t("setChosenTime",{loading:!1}),e.modal.hide("confirm"),e.modal.hide("alert");var i=JSON.parse(n);void 0!==i.message&&(t("setModalTitle",i.message),e.modal.show("alert"))}},Et={state:{socket:void 0},getters:{socket:function(t){return t.socket},isConnected:function(t){return void 0!==t.socket&&!0===t.socket.connected}},mutations:{setSocket:function(t){t.socket=Ct.a.over(new vt.a("/ws-api/v1")),t.socket.heartbeat.outgoing=0,t.socket.heartbeat.incoming=6e4},unsetSocket:function(t){t.socket=void 0}},actions:{connect:function(t){var e=t.commit,u=t.dispatch,n=t.getters,i=t.state;return new Promise((function(t,s){e("setSocket"),i.socket.connect({},(function(){i.socket.subscribe("/user/queue/ws-api/v1/session-expired",At(e,u),{id:"sub-0"}),i.socket.subscribe("/user/queue/ws-api/v1/times",(function(t){var u=t.body;e("setTimes",JSON.parse(u)),i.socket.subscribe("/topic/ws-api/v1/reservations",Ft(e),{id:"sub-2"}),i.socket.subscribe("/user/queue/ws-api/v1/reservation-started",pt(e,n),{id:"sub-3"}),i.socket.subscribe("/user/queue/ws-api/v1/reservation-ended",bt(e,n),{id:"sub-4"})}),{id:"sub-1"}),i.socket.send("/app/ws-api/v1/times"),t("Client connected!")}),(function(){return s(new Error("Something went wrong!"))}))}))},disconnect:function(t){var e=t.commit,u=t.state;return new Promise((function(t,n){return u.socket.disconnect((function(){e("unsetSocket"),t("Client disconnected!")}))}))},reconnect:function(t){var e=t.dispatch;return new Promise((function(t,u){return e("disconnect").then((function(){return e("connect").then(t).catch(u)})).catch(u)}))}},modules:{},plugins:[]};n["default"].use(ct["a"]);var gt=new ct["a"].Store({modules:{apiStore:dt,authStore:mt,wsStore:Et},plugins:[lt()({statesPaths:["authStore.message","authStore.messageVariant","authStore.authenticated","authStore.assistant"]})]});n["default"].use(S["a"]);var Bt=[{path:"/",redirect:"/times"},{path:"/admin",component:j},{path:"/times",component:ut},{path:"/login",component:rt}],_t=new S["a"]({mode:"history",base:"/",routes:Bt});_t.beforeEach((function(t,e,u){"/login"===e.path&&gt.commit("resetAuthMessage"),gt.getters.isAuthenticated||"/login"===t.path||"/times"===t.path?u():u("/login")}));var yt=_t;u("f9e3"),u("2dd8"),u("9ddc"),u("abe2");n["default"].use(s.a),n["default"].use(a["a"]),n["default"].use(o["a"]),n["default"].use(r["a"]),n["default"].use(c["a"]),n["default"].use(D["a"]),n["default"].use(l["a"]),n["default"].use(d["a"]),n["default"].use(m["a"]),n["default"].use(v.a,"vac"),n["default"].config.productionTip=!1;var wt=function(){return new n["default"]({router:yt,store:gt,render:function(t){return t(x)},created:function(){gt.dispatch("connect")}}).$mount("#app")};C.a.load({google:{families:["Cinzel:400,500,600,700,800,900","Inconsolata:200,300,400,500,600,700,800,900"]},classes:!1,timeout:3e3,active:wt})},"5c0b":function(t,e,u){"use strict";u("9c0c")},"9c0c":function(t,e,u){},a1f2:function(t,e,u){"use strict";u("4e6c")},a71a:function(t,e,u){"use strict";u("24ba")},abe2:function(t,e,u){},dea9:function(t,e,u){}});
//# sourceMappingURL=app.6a156242.js.map